# 무한의 계단(Infinity Stairs)
- Wanted에서 주관하는 게임 개발자 양성 3기에 참여하여 엔진 구조를 이해하기 위해 시작한 프로젝트 입니다. 한 때 재밌게 즐겨했던 모바일 게임인 무한의 계단 게임을 모작.

### 프로젝트 기간
- 2025.07.30 ~ 2025.08.07
  
### 프로토 타입 사진
<img width="248" height="276" alt="초기 버전" src="https://github.com/user-attachments/assets/813627e1-e126-49af-8fbe-a7cedf964213" />

### 완성 사진
<img width="728" height="627" alt="화면 캡처 2025-08-12 122432" src="https://github.com/user-attachments/assets/ba2c333e-62fe-4b6c-9dc2-da65154e85d8" />



## 개발 내용 및 과정
### 1일차 (25/7/30)
- 기본 엔진(Engine, Level, Actor) 구현
- 시작 화면(Title Level) 구현 및 아스키 아트 출력
  - 타이틀이 2번 호출되는 버그 발견.
- 인게임 화면(InGameLevel) 틀 마련

### 2일차 (25/7/31)
- Player 객체 구현
  - Player의 키보드 입력 확인 (Q, W)
- Stair 객체 구현
- 계단 생성 객체 구현
  - Player가 키를 입력할 때마다 계단을 생성해서 보여줌
    - 생성 버그 발생...(#1)

### 3일차 (25/8/1)
- 물리 충돌 시스템 구현
  - 이미지 크기에 알맞지 않은 Player를 위한 객체 시스템
  - 처음에 객체의 위치도 따로 관리했지만 Owner 시스템을 도입하여 일일이 객체의 위치를 바꾸는 작업을 제거.
- 2일차에서 발견한 콘솔에서 잘못 그려지는 버그 수정 (#1)
- Player의 방향에 따른 Render 임시 구현.

### 4일차 (25/8/2) 휴식
### 5일차 (25/8/3)
- 1줄짜리 Image 대신 여러 줄의 Image를 그릴 수 있도록 도와주는 Character 객체 프로토타 구현.
- 유니코드 테스트.

### 6일차 (25/8/4)
- Actor의 문자 인코딩(CP949 -> UTF16)으로 변경 및 여러 줄 출력 가능하도록 변경
  - 다양한 문자를 사용하기 위해 유니코드로 변경.
    - 콘솔에 출력되는 문자의 크기가 달라지는 버그 발생(#2)
  - StairGenerator 수정
    - 계단을 여러 줄로 출력 가능하도록 변경
  - Player, Stair 로직 수정
    - 2중 포인터로 변경하여 여러 줄 출력 가능하도록 변경
- 더블 버퍼링 구현
  - 콘솔에 wcout과 같은 출력 함수를 사용해 출력하다보니 깜빡이는 현상이 발생하여 더블 버퍼링 구현.
  - 더블 버퍼링을 사용함에 따라 엔진의 출력 관련 로직 수정
  - 깜빡이는 버그 발생(#3)
- 레벨 시스템에서 관리하던 Actor를 분리
  - 일반 GameObject와 UI Object로 각각 관리하도록 변경(관리 목적 및 그리기 순서를 강제하기 위한 목적)
- 타이머 시스템 구현
  - 시간이 지나면 게임이 끝나도록 유도할 객체 구현.
- InGameLevel의 로직 추가
  - Player와 Stair 충돌 확인 로직 추가
  - 키 변경 시 Timer UI의 시간 초기화 로직 추가
- 각종 UI 객체 프로토타입 구성
  - GameHUD
  - Score
  - Timer
  - Title

### 7일차 (25/8/5)
- 마우스 이벤트 공부.
- 더블버퍼링 버그 수정(#3)-> 지우고, console 버퍼를 바꾸는 순서 오류로 발생한 버그
- Player가 움직이는 듯한 느낌을 주기 위한 Animatior 객체 구현.
- 프로그램 실행 시 GameStart와 Quit를 선택 가능하도록 하는 Navigation 객체 구현 및 로직 이동

### 8일차 (25/8/6)
- 마우스 이벤트 구현을 위한 테스트 코드 삽입.(#4) [클릭이 무시되는 버그]

### 9일차 (25/8/7)
- 모든 릭 제거.
  - Engine이 종료되는 시점에 모든 객체가 삭제되도록 변경
- 더블 free 에러 발생(#5)
  - Level 변경 시 한 프레임의 로직을 끝내지 않고, mainLevel을 변경해서 Actor와 DestroyActor 2부분에서 삭제하여 문제 발생.
- 콘솔 제어 이벤트인 X 버튼 클릭 시 디버깅 방법 습득
  - X버튼을 누르면 5초안에 꺼지지만, msdn 및 문서를 확인하여 Ctrl+C로 디버깅 연구.
- 발표 준비
- 마우스 이벤트 버그 발견(수정은 못함)
  - ReadInputEvent 사용 시 콘솔을 변경하면 이벤트를 누락하는 것으로 판단됨 -> 4~5가지 코드를 실행해보면서 확정함

## 프로젝트를 통해 얻은 점.
### 엔진 구조
- Unity를 하던 당시에는 어떤 식으로 동작하는지 이해를 못했지만, 이 프로젝트를 하면서 unreal과 unity의 구조를 조금은 이해하게 된 것 같음.
### DLL 사용
- DLL을 직접 사용하면서 다른 프로젝트에 연동하여 사용하는 방법을 알게 됨
### 유니코드
- cout을 사용하면 아스키 코드 값은 1칸씩 출력하지만, 2byte 이상의 문자는 2칸을 차지한다는 것을 알았고, 이를 해결하기 위해 Console buffer에 직접 넣어 전부 1칸씩 맞출 수 있다는 것을 깨달음.
### 다양한 이벤트
- GetAsyncKeyState를 통해 입력을 받아 해결할 수는 있지만, 이 함수가 실행될 타이밍에 눌려야 반응을 한다는 점을 알았음
- ReadConsoleInput을 통해 마우스, 키보드 입력 등을 받을 수 있고, 누른 순간에 이벤트를 전부 가지고 있음. 다만 콘솔이 바뀌는 순간에 이벤트를 누락하는 경우가 발생.
### 콘솔 제어 이벤트 디버깅 방법
- Ctrl + C를 해서 디버깅이 된다는 사실을 알게 됨.


## 아쉬운 점
- 관리자 모드에서만 화면 크기가 변하는 문제를 고치지 못했다.(System으로 바꾸는 함수는 관리자 모드에서만 적용되고 있음.
- 게임 엔진의 이해보다 유니코드, 키보드 이벤트, 마우스 이벤트에 시간을 더 쏟은 것 같아서 아쉬웠다.
- 구현만을 목적으로 하다보니 코드가 조금 개판인게 아쉽다(리펙토링 예정)




